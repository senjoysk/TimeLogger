# TimeLogger 管理Webアプリケーション ユーザーガイド

TimeLogger管理Webアプリケーションは、Webブラウザベースの包括的な管理インターフェースです。データベース管理、TODO管理、システム監視などの機能を直感的なUIで提供します。

## 🌐 アクセス方法

### 開発環境
```bash
# 管理Webアプリケーションを起動
npm run admin:dev

# アクセスURL
http://localhost:3001

# 認証情報（環境変数で設定）
Username: ${ADMIN_USERNAME}
Password: ${ADMIN_PASSWORD}
```

### 本番環境
本番環境では読み取り専用モードで動作し、データの変更操作は制限されます。

## 📊 主要機能

### 1. ダッシュボード (`/`)

メインダッシュボードでは、システム全体の概要とクイックアクセス機能を提供します。

#### 表示内容
- **システム環境情報**: 開発・本番環境の識別
- **データベーステーブル一覧**: 各テーブルへのクイックアクセス
- **テーブルレコード数**: 各テーブルのデータ件数表示
- **ナビゲーションメニュー**: 全機能へのアクセス

#### クイックアクション
- **活動ログ確認**: `/tables/activity_logs` への直接アクセス
- **TODO管理**: `/todos` への直接アクセス
- **ユーザー設定**: `/tables/user_settings` への直接アクセス
- **API費用確認**: `/tables/api_costs` への直接アクセス

### 2. データベース管理 (`/tables`)

全データベーステーブルの閲覧・検索・ページネーション機能を提供します。

#### テーブル一覧 (`/tables`)
- **利用可能テーブル**: 
  - `activity_logs`: 活動ログテーブル
  - `api_costs`: APIコスト監視テーブル
  - `user_settings`: ユーザー設定テーブル
  - `daily_analysis_cache`: 分析結果キャッシュテーブル
  - `todo_tasks`: TODOタスクテーブル
  - `message_classifications`: メッセージ分類履歴テーブル

#### テーブル詳細 (`/tables/{tableName}`)
- **データ表示**: ページネーション付きデータ一覧
- **検索機能**: テーブル内データの検索（今後実装予定）
- **レコード件数**: 総レコード数とページ情報
- **ソート機能**: カラム別ソート（今後実装予定）

#### ページネーション
- **デフォルト表示**: 50件/ページ
- **ナビゲーション**: 前ページ・次ページの移動
- **ページ情報**: 現在ページ / 総ページ数

### 3. TODO管理 (`/todos`)

包括的なTODO管理機能をWebインターフェースで提供します。

#### TODO一覧表示
- **フィルタリング**: ユーザー別TODO表示
- **ステータス表示**: pending, in_progress, completed, cancelled
- **優先度表示**: 高・中・低の視覚的表示
- **期限表示**: 期限日の表示と期限切れアラート
- **一括操作**: 複数TODOの選択操作

#### TODO作成 (`/todos/new`)
- **ユーザー選択**: 対象ユーザーの指定
- **タイトル入力**: TODO内容の記述
- **説明入力**: 詳細説明（任意）
- **優先度設定**: 高・中・低の選択
- **期限設定**: 期限日の設定（任意）

#### TODO編集 (`/todos/{id}/edit`)
- **全項目編集**: タイトル、説明、ステータス、優先度、期限
- **ステータス変更**: 進行状況の更新
- **履歴保持**: 編集履歴の自動記録

#### TODO削除
- **個別削除**: 単一TODOの削除
- **確認ダイアログ**: 誤削除防止
- **論理削除**: データの安全な削除

#### 一括操作機能
- **一括ステータス更新**: 複数TODOのステータス一括変更
- **一括削除**: 複数TODOの一括削除
- **選択UI**: チェックボックスによる複数選択

### 4. システム監視 (`/health`)

システムの健全性とパフォーマンス情報を提供します。

#### 表示情報
- **システムステータス**: 正常・異常の判定
- **環境情報**: 開発・本番環境の詳細
- **タイムスタンプ**: 最終チェック時刻
- **レスポンス情報**: APIレスポンス状況

## 🔐 セキュリティ機能

### 認証システム
- **Basic認証**: HTTP Basic認証による保護
- **環境変数設定**: 認証情報の安全な管理（`ADMIN_USERNAME`, `ADMIN_PASSWORD`）
- **セッション管理**: ブラウザセッションの適切な管理
- **認証情報保護**: ソースコードには認証情報を含めず、環境変数で管理

### アクセス制御
- **環境別制御**: 
  - **開発環境**: 全機能利用可能（CRUD操作）
  - **本番環境**: 読み取り専用モード
- **操作制限**: 本番環境での危険な操作の制限
- **視覚的表示**: READ ONLYバッジによる状態表示

### セキュリティヘッダー
- **X-Content-Type-Options**: nosniff
- **X-Frame-Options**: DENY
- **X-XSS-Protection**: 1; mode=block
- **Strict-Transport-Security**: HTTPS強制

## 🎨 ユーザーインターフェース

### デザインシステム
- **UIフレームワーク**: Tailwind CSS v3
- **アイコン**: Font Awesome v6
- **カラーテーマ**: プロフェッショナルなグレー系
- **レスポンシブ**: モバイル・デスクトップ対応

### ナビゲーション
- **グローバルナビ**: 全ページ共通のナビゲーションバー
- **パンくずリスト**: 現在位置の明確化
- **アクティブ状態**: 現在ページのハイライト

### 環境識別
- **環境バッジ**: 開発・本番環境の視覚的識別
- **カラーコード**: 
  - 🟢 開発環境: グリーン
  - 🟡 ステージング環境: イエロー
  - 🔴 本番環境: レッド

### ユーザーエクスペリエンス
- **直感的操作**: 明確なボタンとフォーム
- **確認ダイアログ**: 重要操作の確認
- **エラーメッセージ**: 分かりやすいエラー表示
- **ローディング表示**: 処理中の状態表示

## 🛠️ トラブルシューティング

### よくある問題

#### 1. 認証エラー
**症状**: ログインできない
**原因**: 認証情報の不一致
**解決策**: 
```bash
# 環境変数を確認
echo $ADMIN_USERNAME
echo $ADMIN_PASSWORD

# .env ファイルを確認
cat .env | grep ADMIN
```

#### 2. サーバー起動エラー
**症状**: `npm run admin:dev` でエラー
**原因**: ポート競合、依存関係の問題
**解決策**:
```bash
# ポート3001の使用状況確認
lsof -i :3001

# 依存関係の再インストール
npm install

# ビルド実行
npm run build
```

#### 3. データが表示されない
**症状**: テーブルが空に見える
**原因**: データベースパス、権限の問題
**解決策**:
```bash
# データベースファイルの存在確認
ls -la data/app.db

# データベース内容確認
sqlite3 data/app.db ".tables"
```

#### 4. TODO操作エラー
**症状**: TODO作成・編集ができない
**原因**: 本番環境の読み取り専用モード
**解決策**: 開発環境でのみ編集操作を実行

### ログ確認方法
```bash
# サーバーログの確認
npm run admin:dev

# エラーログの詳細確認
tail -f logs/admin-app.log  # (ログファイルが存在する場合)
```

## 📈 今後の機能拡張

### Phase 3: 高度な管理機能
- **データ分析ダッシュボード**: 統計情報とグラフ表示
- **ユーザー管理機能**: 個別ユーザー設定管理
- **バックアップ・リストア**: データ保護機能
- **ログ監視**: リアルタイムログ表示

### UI/UX改善
- **検索機能強化**: 高度な検索フィルター
- **ソート機能**: カラム別ソート
- **エクスポート機能**: CSV/JSON データエクスポート
- **リアルタイム更新**: WebSocket によるリアルタイム表示

### セキュリティ強化
- **ロールベースアクセス制御**: ユーザー権限管理
- **監査ログ**: 操作履歴の記録
- **二段階認証**: セキュリティ強化

## 🤝 サポート

### ドキュメント
- **メインREADME**: `README.md`
- **開発ガイド**: `CLAUDE.md`
- **アーキテクチャ**: `README.md#アーキテクチャ`

### 問題報告
- **GitHub Issues**: 不具合・機能要望の報告
- **開発者コミュニケーション**: コードレビューとディスカッション

---

**TimeLogger管理Webアプリケーションは、効率的なデータ管理と直感的な操作を実現する、包括的な管理ソリューションです。**