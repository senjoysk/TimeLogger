# Requirements: Discord Task Logger

## 1. 概要 (Overview)

Discordをインターフェースとし、
Discord上でのbotとの対話で、いつなにをしていたのかを記録する。

## 2. 機能要件 (Functional Requirements)

### 2.1 30分間隔問いかけ機能
- **実行時間**: 平日9:00〜18:00の毎時0分・30分
- **問いかけ方法**: ユーザーへのDMでメンション
- **問いかけ内容**: "この30分間なにしてた？"

### 2.2 活動記録投稿機能
- **投稿形式**: 自由文（LLMで解析）
- **カテゴリ分類**: 動的生成（仕事、勉強、休憩、会議、調査、プログラミングなど）
- **追加投稿**: 前の30分枠への追加投稿が可能
- **時間外投稿**: 18:00以降・土日も該当時間のタスクとして扱う
- **複数投稿**: 同一30分枠に何度でも追加可能

### 2.3 日次サマリー機能
- **生成タイミング**: 
  - 要求時（DMでの自由文メンション）
  - 毎日18:00に自動生成
- **サマリー内容**:
  - カテゴリ別時間集計
  - 活動内容を基にした感想
  - 明日に向けた前向きな一言（LLM生成）
- **日の境界**: 5:00am〜翌4:59am

### 2.4 データ管理
- **保持期間**: 当日データのみ（翌日リセット）
- **利用範囲**: DMのみ

## 3. 非機能要件 (Non-functional Requirements)

### 3.1 パフォーマンス・可用性
- **応答時間**: 即応性重視
- **稼働時間**: 24時間稼働

### 3.2 セキュリティ・プライバシー
- **データ機密性**: Public禁止、利用ユーザーのみ参照可能
- **アクセス制限**: 他ユーザーからの閲覧制限必須

### 3.3 技術的制約
- **優先事項**: 簡単な動作開始を優先

## 4. 将来の追加要件 (Future Requirements)
- 外部エクスポート機能
- 前日以前の記録保存機能
- 投稿内容の編集機能
- 週次・日次サマリー機能拡張
- グラフUIでの表示機能
- カレンダー登録機能
- 30分以前の事象記録機能
- マルチユーザー対応

## 5. 推奨技術スタック (Recommended Tech Stack)
- **言語**: Node.js + TypeScript
- **Discord**: discord.js
- **LLM**: Google Gemini API (Vertex AI)
- **データベース**: SQLite（初期）→ Cloud SQL (PostgreSQL) / Firestore
- **スケジューラー**: node-cron
- **ホスティング**: Google Cloud Run（推奨）/ Railway / Render
- **認証**: Google Cloud IAM

